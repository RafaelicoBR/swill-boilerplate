angular.module("starter",["ionic","starter.controllers","starter.services"]).run(function($ionicPlatform){$ionicPlatform.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}).config(function($stateProvider,$urlRouterProvider,$ionicConfigProvider){$ionicConfigProvider.backButton.previousTitleText(!1).text("&emsp;&emsp;"),$stateProvider.state("menu",{url:"/menu","abstract":!0,templateUrl:"templates/menu.html",controller:"ProgramacaoCtrl"}).state("menu.home",{url:"/home",views:{menuContent:{templateUrl:"templates/home.html"}}}).state("menu.programacao",{url:"/programacao","abstract":!0,views:{menuContent:{templateUrl:"templates/programacao.html",controller:"ProgramacaoCtrl"}}}).state("menu.programacao.dia",{url:"/dia/:dia",views:{tabProgramacao:{templateUrl:"templates/programacao-dia.html",controller:"ProgramacaoCtrl"}}}).state("menu.programacao-por-participante",{url:"/atividade/participante/:palestranteId",views:{menuContent:{templateUrl:"templates/programacao-por-participante.html",controller:"ProgramacaoParticipanteCtrl"}}}).state("menu.atividade",{url:"/atividade/:atividadeId",views:{menuContent:{templateUrl:"templates/atividade.html",controller:"AtividadeCtrl"}}}).state("menu.programacao-interativa",{url:"/programacao-interativa","abstract":!0,views:{menuContent:{templateUrl:"templates/programacao-interativa.html",controller:"ProgramacaoCtrl"}}}).state("menu.programacao-interativa.dia",{url:"/dia/:dia",views:{tabProgramacaoInterativa:{templateUrl:"templates/programacao-interativa-dia.html",controller:"ProgramacaoCtrl"}}}).state("menu.votacao",{url:"/votacao/atividade/:codigoAtividade",views:{menuContent:{templateUrl:"templates/votacao.html",controller:"VotacaoCtrl"}}}).state("menu.participantes",{url:"/participantes","abstract":!0,views:{menuContent:{templateUrl:"templates/participantes.html",controller:"ParticipantesCtrl"}}}).state("menu.participantes.internacionais",{url:"/internacionais",views:{tabParticipantes:{templateUrl:"templates/participantes-internacionais.html",controller:"ParticipantesCtrl"}}}).state("menu.participantes.nacionais",{url:"/nacionais",views:{tabParticipantes:{templateUrl:"templates/participantes-nacionais.html",controller:"ParticipantesCtrl"}}}).state("menu.participante",{url:"/participante/:participanteId",views:{menuContent:{templateUrl:"templates/participante.html",controller:"ParticipanteCtrl"}}}).state("menu.expositores",{url:"/expositores",views:{menuContent:{templateUrl:"templates/expositores.html",controller:"ExpositoresCtrl"}}}).state("menu.mapa-evento",{url:"/mapa-evento/:positionX/:positionY",views:{menuContent:{templateUrl:"templates/mapa-evento.html",controller:"MapaEventoCtrl"}}}).state("menu.informacoes",{url:"/informacoes",views:{menuContent:{templateUrl:"templates/informacoes.html",controller:"InformacoesCtrl"}}}).state("menu.programacao-social",{url:"/programacao-social","abstract":!0,views:{menuContent:{templateUrl:"templates/programacao-social.html",controller:"ProgramacaoSocialCtrl"}}}).state("menu.programacao-social.dia",{url:"/dia/:dia",views:{tabProgramacaoSocial:{templateUrl:"templates/programacao-social-dia.html",controller:"ProgramacaoSocialCtrl"}}}).state("menu.atividade-social",{url:"/atividade-social/:atividadeId",views:{menuContent:{templateUrl:"templates/atividade-social.html",controller:"AtividadeSocialCtrl"}}}).state("menu.concierge",{url:"/concierge",views:{menuContent:{templateUrl:"templates/concierge.html",controller:"ConciergeCtrl"}}}).state("menu.estabelecimento",{url:"/estabelecimento/:estabelecimentoId",views:{menuContent:{templateUrl:"templates/estabelecimento.html",controller:"EstabelecimentoCtrl"}}}),$urlRouterProvider.otherwise("/menu/home")}),angular.module("starter.controllers",[]).controller("ProgramacaoCtrl",function($scope,$stateParams,$http,$ionicViewSwitcher,$state,$ionicModal,$timeout,ProgramacaoCache,AlternativasVotacao){$scope.dia=$stateParams.dia+"/04",$scope.go=function(){$ionicViewSwitcher.nextDirection("none")},$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.replaceSpace=function(value){return value&&null!==value?value.replace(/ /g,"-"):"outros"},$scope.checkDia=function(dia){return String(dia)===String($stateParams.dia)?!0:void 0},$scope.place=function(value){return"1"===String(value)?"Auditório Principal":"1"===String(value)?"Auditório 1":void 0},$scope.loginData={},$ionicModal.fromTemplateUrl("templates/login-votacao.html",{scope:$scope}).then(function(modal){$scope.modal=modal}),$scope.login=function(){$scope.modal.show()},$scope.closeLogin=function(){$scope.modal.hide()},$scope.doLogin=function(){$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/questions/"+$scope.loginData.senha,headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$state.go("menu.votacao",{codigoAtividade:$scope.loginData.senha}),$scope.closeLogin();for(var i=0;i<data.Answers.length;i++)AlternativasVotacao.set(data.Answers[i].Option,data.Answers[i].Id)}).error(function(){$scope.erro="Código Incorreto ou a sessão ainda está fechada."})};var cache=ProgramacaoCache.get("ProgramacaoCache");cache?$scope.atividades=cache:$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/activities",headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$scope.atividades=data,localStorage.setItem("programacao",JSON.stringify(data)),ProgramacaoCache.put("ProgramacaoCache",data)}).error(function(){$scope.atividades=JSON.parse(localStorage.getItem("programacao")),cache=ProgramacaoCache.put("ProgramacaoCache",JSON.parse(localStorage.getItem("programacao")))})}).controller("AtividadeCtrl",function($scope,$stateParams,$ionicViewSwitcher,$state,$sce){$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.SkipValidation=function(value){return $sce.trustAsHtml(value)},$scope.Place=function(value){return"1"===String(value)?"Auditório Principal":"1"===String(value)?"Auditório 1":void 0},$scope.Uf=function(value){return""!==value&&value?"("+value+")":""},$scope.Id=$stateParams.atividadeId;for(var cache=JSON.parse(localStorage.getItem("programacao")),i=0;i<cache.length;i++)String(cache[i].Id)===String($stateParams.atividadeId)&&($scope.Type=cache[i].Type,$scope.Theme=cache[i].Theme,$scope.Date=cache[i].Date,$scope.Room=cache[i].Room,$scope.Participants=cache[i].Participants,$scope.Lectures=cache[i].Lectures)}).controller("ProgramacaoParticipanteCtrl",function($scope,$stateParams,$ionicViewSwitcher,$state){function unique(ary){for(var u=ary.concat().sort(),i=1;i<u.length;)u[i-1]===u[i]?u.splice(i,1):i++;return u}$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.Id=$stateParams.palestranteId;for(var cache=JSON.parse(localStorage.getItem("programacao")),arrayParticipantes=[],arrayPalestrantes=[],arrayAtividadesFiltradas=[],i=0;i<cache.length;i++)for(var j=0;j<cache[i].Participants.length;j++)if(String(cache[i].Participants[j].Id)===String($stateParams.palestranteId)){arrayParticipantes.push(cache[i].Id);break}for(var i=0;i<cache.length;i++)for(var k=0;k<cache[i].Lectures.length;k++)if(String(cache[i].Lectures[k].SpeakerId)===String($stateParams.palestranteId)){arrayPalestrantes.push(cache[i].Id);break}for(var idUsuarios=arrayPalestrantes.concat(arrayParticipantes),uniq=unique(idUsuarios),i=0;i<cache.length;i++)for(var j=0;j<uniq.length;j++)String(cache[i].Id)===String(uniq[j])&&arrayAtividadesFiltradas.push(cache[i]);$scope.atividades=arrayAtividadesFiltradas,$scope.day=function(day){for(var i=0;i<arrayAtividadesFiltradas.length;i++)if(arrayAtividadesFiltradas[i].Date===day)return!0}}).controller("VotacaoCtrl",function($scope,$http,$ionicPopup,$ionicHistory,$stateParams,$ionicViewSwitcher,$state,AlternativasVotacao){$scope.A=AlternativasVotacao.get("a"),$scope.B=AlternativasVotacao.get("b"),$scope.C=AlternativasVotacao.get("c"),$scope.D=AlternativasVotacao.get("d"),$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.showConfirm=function(alternativaEscolhida){var confirmPopup=$ionicPopup.confirm({title:"Confirmar Voto",cancelText:"Não",cancelType:"button-assertive",okText:"Sim",okType:"button-balanced"});confirmPopup.then(function(res){res&&$ionicPopup.alert({title:"Voto Confirmado"}).then(function(){$http({method:"POST",url:"https://cbc2015api.azurewebsites.net/api/questions/"+$stateParams.codigoAtividade+"/answers/"+alternativaEscolhida+"/useranswers",headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(){$ionicHistory.goBack()}).error(function(data,status){console.log(status)})})})}}).controller("ParticipantesCtrl",function($scope,$http,$state,$ionicViewSwitcher,ParticipantesCache){$scope.go=function(nacionalidade){$ionicViewSwitcher.nextDirection("none"),$state.go("menu.participantes."+nacionalidade)},$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.verificaFoto=function(foto){return foto?foto:"padrao.png"};var cache=ParticipantesCache.get("ParticipantesCache");cache?$scope.participantes=cache:$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/speakers",headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$scope.participantes=data,localStorage.setItem("participantes",JSON.stringify(data)),ParticipantesCache.put("ParticipantesCache",data)}).error(function(){$scope.participantes=JSON.parse(localStorage.getItem("participantes")),cache=ParticipantesCache.put("ParticipantesCache",JSON.parse(localStorage.getItem("participantes")))})}).controller("ParticipanteCtrl",function($scope,$stateParams,$ionicViewSwitcher,$state,$sce){$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.SkipValidation=function(value){return $sce.trustAsHtml(value)},$scope.Id=$stateParams.participanteId;for(var cache=JSON.parse(localStorage.getItem("participantes")),i=0;i<cache.length;i++)String(cache[i].Id)===String($stateParams.participanteId)&&($scope.Name=cache[i].Name,$scope.Lead=cache[i].Lead,$scope.Resume=cache[i].Curriculum)}).controller("ExpositoresCtrl",function($scope,$stateParams,$ionicViewSwitcher,$state,$http,ExpositoresCache){$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")};var cache=ExpositoresCache.get("ExpositoresCache");cache?$scope.expositores=cache:$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/sponsors",headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$scope.expositores=data,localStorage.setItem("expositores",JSON.stringify(data)),ExpositoresCache.put("ExpositoresCache",data)}).error(function(){$scope.expositores=JSON.parse(localStorage.getItem("expositores")),cache=ExpositoresCache.put("ExpositoresCache",JSON.parse(localStorage.getItem("expositores")))})}).controller("MapaEventoCtrl",function($scope,$stateParams){$scope.X=$stateParams.positionY+"px",$scope.Y=$stateParams.positionX+"px"}).controller("InformacoesCtrl",function($scope){$scope.toggleGroup=function(activity){$scope.shownGroup=$scope.isGroupShown(activity)?null:activity},$scope.isGroupShown=function(activity){return $scope.shownGroup===activity}}).controller("ProgramacaoSocialCtrl",function($scope,$http,$stateParams,$state,$ionicViewSwitcher,ProgramacaoSocialCache){$scope.dia=$stateParams.dia+"/04",$scope.go=function(){$ionicViewSwitcher.nextDirection("none")},$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.checkDia=function(dia){return String(dia)===String($stateParams.dia)?!0:void 0},$scope.adesao=function(value){return""!==value&&value?"Por Adesão":""};var cache=ProgramacaoSocialCache.get("ProgramacaoSocialCache");cache?$scope.atividades=cache:$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/socialactivities",headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$scope.atividades=data,localStorage.setItem("programacao-social",JSON.stringify(data)),ProgramacaoSocialCache.put("ProgramacaoSocialCache",data)}).error(function(){$scope.atividades=JSON.parse(localStorage.getItem("programacao-social")),cache=ProgramacaoSocialCache.put("ProgramacaoSocialCache",JSON.parse(localStorage.getItem("programacao-social")))})}).controller("AtividadeSocialCtrl",function($scope,$stateParams,$ionicViewSwitcher,$state,$sce){$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.SkipValidation=function(value){return $sce.trustAsHtml(value)},$scope.Place=function(value){return"1"===value?"Auditório Principal":"Auditório 1"},$scope.adesao=function(value){return""!==value&&value?"Por Adesão":""};for(var cache=JSON.parse(localStorage.getItem("programacao-social")),i=0;i<cache.length;i++)String(cache[i].Id)===String($stateParams.atividadeId)&&($scope.Title=cache[i].Title,$scope.Photo=cache[i].Photo,$scope.Text=cache[i].Text,$scope.Type=cache[i].Type)}).controller("ConciergeCtrl",function($scope,$stateParams,$http,$sce,ConciergeCache){var cache=ConciergeCache.get("ConciergeCache");cache?$scope.lugares=cache:$http({method:"GET",url:"https://cbc2015api.azurewebsites.net/api/concierges/",params:{categoryName:"Bares e Restaurantes"},headers:{Authorization:"Basic YWRtaW46YWRtaW4="}}).success(function(data){$scope.lugares=data,localStorage.setItem("concierge",JSON.stringify(data)),ConciergeCache.put("ConciergeCache",data)}).error(function(){$scope.lugares=JSON.parse(localStorage.getItem("concierge")),cache=ConciergeCache.put("ConciergeCache",JSON.parse(localStorage.getItem("concierge")))})}).controller("EstabelecimentoCtrl",function($scope,$stateParams,$sce,$ionicViewSwitcher,$state){$scope.goHome=function(){$ionicViewSwitcher.nextDirection("back"),$state.go("menu.home")},$scope.SkipValidation=function(value){return $sce.trustAsHtml(value)};for(var cache=JSON.parse(localStorage.getItem("concierge")),i=0;i<cache.length;i++)String(cache[i].Id)===String($stateParams.estabelecimentoId)&&($scope.Photo=cache[i].PhotoCopy,$scope.Title=cache[i].Title,$scope.Text=cache[i].Text)}),angular.module("starter.services",[]).factory("ProgramacaoCache",function($cacheFactory){return $cacheFactory("ProgramacaoCache")}).factory("ParticipantesCache",function($cacheFactory){return $cacheFactory("ParticipantesCache")}).factory("ExpositoresCache",function($cacheFactory){return $cacheFactory("ExpositoresCache")}).factory("ProgramacaoSocialCache",function($cacheFactory){return $cacheFactory("ProgramacaoSocialCache")}).factory("ConciergeCache",function($cacheFactory){return $cacheFactory("ConciergeCache")}).factory("AlternativasVotacao",function(){var opcoes=[];return{get:function(opcao){return opcoes[opcao]},set:function(opcao,id){opcoes[opcao]=id}}});